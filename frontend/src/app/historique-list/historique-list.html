<script src="../services/historiqueService/historique.ts"></script>
<script src="historique-list.ts"></script>
<div class="page-header">
    <h1>ğŸ¢ Gestion des Historiques</h1>
    <p class="subtitle">GÃ©rez les Historiques</p>
</div>

<div class="card">
    <div class="card-header">
        <h3>ğŸ“‹ Historique </h3>
        <span class="badge">{{  historiques.length }} historique(s)</span>
    </div>
    <div class="table-container">
        <table class="modern-table">
            <thead>
            <tr>
                <th>ID</th>
                <th>datetime</th>
                <th>statut</th>
                <th>idVol</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let historique of historiques" class="table-row">

                <td *ngIf="editingId !== historique.id">{{ historique.id }}</td>
                <td *ngIf="editingId === historique.id">
                    <input type="number" [(ngModel)]="historique.id"
                           [ngModelOptions]="{standalone: true}"
                           name="id-{{historique.id}}"
                    >
                </td>

                <td *ngIf="editingId !== historique.id">{{ historique.datetime }}</td>
                <td *ngIf="editingId === historique.id">
                    <input type="datetime-local" [(ngModel)]="historique.datetime"
                           [ngModelOptions]="{standalone: true}"
                           name="datetime-{{historique.id}}"
                    >
                </td>

                <td *ngIf="editingId !== historique.id">{{ historique.statut }}</td>
                <td *ngIf="editingId === historique.id">
                    <select [(ngModel)]="historique.statut"
                            [ngModelOptions]="{standalone: true}"
                            name="Statut-{{historique.id}}">
                        <option value="">--SÃ©lectionner--</option>
                        <option value="PREVU"> Prevu</option>
                        <option value="ENATTENTE"> En attente </option>
                        <option value="EMBARQUEMENT">Embarquement</option>
                        <option value="DECOLLE"> ğŸ›¬ Decolle</option>
                        <option value="ENVOL"> ğŸ›« En vol</option>
                        <option value="ARRIVE"> arrive</option>
                        <option value="ANNULE"> annule</option>
                    </select>
                </td>

                <td *ngIf="editingId !== historique.id">{{ historique.idVol }}</td>
                <td *ngIf="editingId === historique.id">
                    <input type="number" [(ngModel)]="historique.idVol"
                           [ngModelOptions]="{standalone: true}"
                           name="idVol-{{historique.id}}"
                    >
                </td>

                <td class="actions-cell">
                    <button class="btn btn-danger btn-sm" (click)="supprimerHistorique(historique.id)" title="Supprimer">ğŸ—‘ï¸</button>
                </td>

            </tr>
            </tbody>
        </table>
    </div>

    <div *ngIf="historiques.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ¢</div>
        <h3>Aucun historique trouvÃ©</h3>
        <p>Commencez par ajouter votre changer votre statut du vol </p>
    </div>
</div>
